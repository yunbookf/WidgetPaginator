(function($){$.fn.extend({pageControl:function(count,page,current){if(this.data('jpc-html')){var data=this.data('jpc-html');var curHTML=data.curHTML;var norHTML=data.norHTML;var sirHTML=data.sirHTML}else{var curHTML=this.children(':eq(0)')[0].outerHTML;var norHTML=this.children(':eq(1)')[0].outerHTML;var sirHTML=this.children(':eq(2)')[0].outerHTML;this.data('jpc-html',{'curHTML':curHTML,'norHTML':norHTML,'sirHTML':sirHTML})}var html='';var allPage=parseInt(count/page);if(allPage<1)allPage=1;var toPage=((current+4)>=allPage)?allPage:current+4;var fromPage=((current-4)<=1)?1:current-4;if(current>=7)html=norHTML.replace(/\{p\}/g,'1')+sirHTML;else if(current==6)html=norHTML.replace(/\{p\}/g,'1');for(var p=fromPage;p<=toPage;++p){if(current==p)html+=curHTML.replace(/\{p\}/g,p);else html+=norHTML.replace(/\{p\}/g,p)}if(toPage<allPage-1)html+=sirHTML+norHTML.replace(/\{p\}/g,allPage);else if(toPage==allPage-1)html+=norHTML.replace(/\{p\}/g,allPage);this.html(html)}})})(jQuery);